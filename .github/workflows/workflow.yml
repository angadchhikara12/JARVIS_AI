name: Remove .env from Git Tracking

on:
  push:
    branches:
      - main
  pull_request:

jobs:
  untrack-env:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Remove .env if tracked
        run: |
          git config --global user.email "chhikaraangad@gmail.com"
          git config --global user.name "Angad Chhikara"
          if git ls-files | grep -q "\.env"; then
            echo "Found .env file in repo. Removing from Git tracking..."
            git rm --cached .env
            git commit -m "Stop tracking .env"
            git push origin main
          else
            echo ".env file not tracked. Nothing to do."
          fi
